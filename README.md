SmartQQ-Bot Ver-0.1
=========
**注意:**此框架仍处于开发中，许多模块仍可能出现较大改动，如果仍想继续升级该框架，推荐各位暂时不要进行较大规模的自定义。

***该分支使用登陆部分逻辑与代码参考了[原名：SmartQQ-for-Raspberry-Pi(PiWebQQV2)](https://github.com/xqin/SmartQQ-for-Raspberry-Pi)这一项目***，以此为基础制作了基于SmartQQ的自动机器人*框架*。

登陆时采用QQ安全中心的二维码做为登陆条件, 不需要在程序里输入QQ号码及QQ密码。

##如何使用
+ ```python main.py```
+ 等待提示“登陆二维码下载成功，请扫描”，打开脚本所在目录的v.jpg图片扫描二维码。
+ 等待登陆成功的提示
+ 修改config文件夹中的QQBot_default.conf配置文件
+ 群聊各功能需要修改config文件夹下对应群号的conf文件中的设置以激活。（开发中）

##如何添加自定义功能
+ 根据功能类型修改对应文件：
	+ 群聊功能：Group.py
	+ 私聊功能：Pm.py

+ 在对应类(class)中编写方法，方法的参数固定为self与msg，即
```def [Function Name](self, msg):```
+ 需要注意方法的返回值，执行成功请返回```True```,没有执行或执行失败请返回```False```
+ 机器人启动后，打开要激活的群设置文件（如：config/123456789.conf），在handle_func_list一项中，选择适当的位置加入你添加的功能的名称（Function Name），你添加的位置决定了功能的执行顺序	（现在执行顺序只能临时在Group.py中修改，通过配置文件修改正在开发中）

##程序模块：
1. 登陆与消息获取：QQLogin.py
2. 消息处理模块：MsgHandler.py
3. 配置参数控制模块：Config.py

##类定义
1. 消息类：Msg.py
2. 通知类：Notify.py
3. 群类：Group.py

##程序运行逻辑：
1. 使用QQ类登陆
2. 使用登陆后的QQ类初始化消息处理模块
3. 进入轮询
4. 使用消息处理模块处理消息

**文档仍待完善**

##TODO
+ 把旧版本原有功能逐步添加回来
+ 恢复多线程处理模式，或使用协程
+ 优化配置参数模块，对于功能开关的控制
+ 优化稳定性，补充类定义
+ 尽可能地简化二次开发的复杂性
+ 编写文档

======
#以下为旧版README
##功能
<small>注：以下命令皆是在qq中发送，群聊命令发送到所在群中</small>

+ 群聊学习功能，类似于小黄鸡，在群中通过发送```!learn {ha}{哈哈}```语句，则机器人检测到发言中包含“ha”时将自动回复“哈哈”。```!delete {ha}{哈哈}```可以删除该内容。学习内容会自动储存在```groupReplys```目录中群号.save文件

+ 群聊复读功能，检测到群聊中***连续两个***回复内容相同，将自动复读该内容1次。

+ 群聊关注功能，使用命令```!follow qq号```可以使机器人复读此人所有发言（除命令外）使用命令```!unfollow qq号```解除关注。qq号处可使用"me"来快速关注与解除关注自己，例：```!follow me```

+ 私聊问答功能，可以自定义机器人私聊时提出问题，并可储存对方的回复，一般用于自动问卷调查。


##TODO
+ logging模块优化分离，保证主程序无任何print输出。私聊与群消息提醒使用单独的文件输出。
+ 细化配置项（tucao_auth = (all/self/custom/none)）
+ tucao内容储存优化，使用cPickle库	
+ 工程模块化重构
+ 群成员外号表


